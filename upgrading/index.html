


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="SQLDelight - Generates typesafe Kotlin APIs from SQL">
      
      
        <link rel="canonical" href="https://cashapp.github.io/sqldelight/upgrading/">
      
      
        <meta name="author" content="Square, Inc.">
      
      <link rel="shortcut icon" href="../images/icon-cashapp.png">
      <meta name="generator" content="mkdocs-1.1, mkdocs-material-5.1.0">
    
    
      
        <title>Upgrading - SQLDelight</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.89dc9fe3.min.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/palette.ecd4686e.min.css">
      
      
        
        
        <meta name="theme-color" content="#7e57c2">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="../css/app.css">
    
    
      
    
    
  </head>
  
  
    
    
    <body dir="ltr" data-md-color-primary="deep-purple" data-md-color-accent="pink">
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#upgrading-from-versions-before-10" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="https://cashapp.github.io/sqldelight/" title="SQLDelight" class="md-header-nav__button md-logo" aria-label="SQLDelight">
      
  <img src="../images/icon-cashapp.png" alt="logo">

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z" /></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            SQLDelight
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Upgrading
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z" /></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z" /></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z" /></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/cashapp/sqldelight/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    sqldelight
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://cashapp.github.io/sqldelight/" title="SQLDelight" class="md-nav__button md-logo" aria-label="SQLDelight">
      
  <img src="../images/icon-cashapp.png" alt="logo">

    </a>
    SQLDelight
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/cashapp/sqldelight/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    sqldelight
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../custom_projections/" title="Custom Projections" class="md-nav__link">
      Custom Projections
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../query_arguments/" title="Query Arguments" class="md-nav__link">
      Query Arguments
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../types/" title="Types" class="md-nav__link">
      Types
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../transactions/" title="Transactions" class="md-nav__link">
      Transactions
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../custom_column_types/" title="Custom Column Types" class="md-nav__link">
      Custom Column Types
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../migrations/" title="Migrations" class="md-nav__link">
      Migrations
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../rxjava/" title="RxJava" class="md-nav__link">
      RxJava
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../coroutines/" title="Coroutines" class="md-nav__link">
      Coroutines
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../multiplatform/" title="Multiplatform" class="md-nav__link">
      Multiplatform
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../android_paging/" title="Android Paging" class="md-nav__link">
      Android Paging
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../supported_dialects/" title="Supported Dialects" class="md-nav__link">
      Supported Dialects
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../intellij_plugin/" title="IntelliJ Plugin" class="md-nav__link">
      IntelliJ Plugin
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../gradle/" title="Gradle" class="md-nav__link">
      Gradle
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-15" type="checkbox" id="nav-15">
    
    <label class="md-nav__link" for="nav-15">
      1.x API
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="1.x API" data-md-level="1">
      <label class="md-nav__title" for="nav-15">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        1.x API
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../1.x/coroutines-extensions/index.html" title="coroutines-extensions" class="md-nav__link">
      coroutines-extensions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../1.x/native-driver/index.html" title="native-driver" class="md-nav__link">
      native-driver
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../1.x/runtime/index.html" title="runtime" class="md-nav__link">
      runtime
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
    <a href="./" title="Upgrading" class="md-nav__link md-nav__link--active">
      Upgrading
    </a>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../changelog/" title="Changelog" class="md-nav__link">
      Changelog
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../contributing/" title="Contributing" class="md-nav__link">
      Contributing
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../code_of_conduct/" title="Code of Conduct" class="md-nav__link">
      Code of Conduct
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/cashapp/sqldelight/edit/master/docs/upgrading.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z" /></svg>
                  </a>
                
                
                  
                
                
                <h1 id="upgrading-from-versions-before-10">Upgrading from Versions before 1.0</h1>
<p><em>If you're still on SQLDelight 0.6 doing the upgrade to 0.7 first so you stay on the SupportSQLite artifact will likely be easiest</em></p>
<p>Upgrade the gradle plugin from 0.7 to 0.7.1. This will upgrade the arch.persistence.db dependency to 1.1.1, but should have no effect on your usage of sqldelight.</p>
<p>Upgrade the gradle plugin from 0.7.1 to 0.7.2. This changes the runtime package from <code>com.squareup.sqldelight</code> to <code>com.squareup.sqldelight.prerelease</code>, so you will need to change references in your own code.</p>
<p>Upgrade the gradle plugin from 0.7.2 to 0.9.0. This upgrades the transitive dependencies and generated code to instead use AndroidX, which is a requirement of SQLDelight. This should be done at the same time as you upgrading your own project to AndroidX, and cannot be done separately since SQLDelight generates code which references android support/AndroidX.</p>
<p><em>ALTERNATIVELY</em> Upgrade the gradle plugin from 0.7 to 0.8.0 before then upgrading to 0.9.0. This upgrades to AndroidX without changing the sqldelight package name to <code>com.squareup.sqldelight.prerelease</code></p>
<p>Suppose on SQLDelight 0.9 you have this <code>User.sq</code> file:</p>
<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="k">user</span> <span class="p">(</span>
  <span class="n">id</span> <span class="nb">INTEGER</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">,</span>
  <span class="n">name</span> <span class="nb">TEXT</span> <span class="k">NOT</span> <span class="k">NULL</span>
<span class="p">);</span>

<span class="n">insertDefaultData</span><span class="p">:</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="k">user</span>
<span class="k">VALUES</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;Alec&#39;</span><span class="p">);</span>

<span class="n">users</span><span class="p">:</span>
<span class="k">SELECT</span> <span class="o">*</span>
<span class="k">FROM</span> <span class="k">user</span><span class="p">;</span>

<span class="k">names</span><span class="p">:</span>
<span class="k">SELECT</span> <span class="n">name</span>
<span class="k">FROM</span> <span class="k">user</span><span class="p">;</span>

<span class="n">insertUser</span><span class="p">:</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="k">user</span>
<span class="k">VALUES</span> <span class="p">(</span><span class="o">?</span><span class="p">,</span> <span class="o">?</span><span class="p">);</span>
</code></pre></div>


<p>This will generate the <code>UserModel</code> class with methods for your queries. </p>
<p>Copy and paste all <code>*Model.java</code> files out of the build directory and into your <code>src/main/java</code> folder. </p>
<p>Upgrade the gradle plugin from 0.9 to 1.0.0-rc4. Note your build will fail at this point because of
the model code having undefined references to the old SQL Delight runtime (like <code>SqlDelightStatement</code>).
To add these back in add an <code>implementation</code> dependency on <code>com.squareup.sqldelight:runtime:0.9.0</code>.</p>
<p>At this point your build should still be working, but changes to <code>.sq</code> files will not be reflected
in your <code>*Model.java</code> files. If things aren't working at this point, please file an issue!</p>
<p>Begin by modifying your <code>SupportSQLiteOpenHelper.Callback</code> to call into the now generated <code>Database</code>
which holds generated code for SQL Delight 1.0:</p>
<div class="codehilite"><pre><span></span><code><span class="c1">//Before</span>
<span class="nd">@Override</span> <span class="kt">void</span> <span class="nf">onCreate</span><span class="p">(</span><span class="n">SupportSQLiteDatabase</span> <span class="n">db</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">db</span><span class="p">.</span><span class="na">execSql</span><span class="p">(</span><span class="n">UserModel</span><span class="p">.</span><span class="na">CREATE_TABLE</span><span class="p">);</span>
  <span class="n">db</span><span class="p">.</span><span class="na">execSql</span><span class="p">(</span><span class="n">UserModel</span><span class="p">.</span><span class="na">INSERTDEFAULTDATA</span><span class="p">);</span>
  <span class="c1">// Other create table/initialization</span>
<span class="p">}</span>
</code></pre></div>


<p>In SQL Delight 1.0 all unlabeled statements in <code>.sq</code> files (including <code>CREATE</code> statements) will be run
during <code>onCreate</code>, so we can remove the <code>insertDefaultData</code> identifier from above:</p>
<p><code>User.sq</code></p>
<div class="codehilite"><pre><span></span><code><span class="p">...</span>

<span class="c1">--insertDefaultData:</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="k">user</span>
<span class="k">VALUES</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;Alec&#39;</span><span class="p">);</span>

<span class="p">...</span>
</code></pre></div>


<p>and now your <code>SupportSQLiteOpenHelper.Callback</code> should call into the <code>Database</code> for <code>create</code></p>
<div class="codehilite"><pre><span></span><code><span class="nd">@Override</span> <span class="kt">void</span> <span class="nf">onCreate</span><span class="p">(</span><span class="n">SupportSQLiteDatabase</span> <span class="n">db</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">SqlDriver</span> <span class="n">driver</span> <span class="o">=</span> <span class="n">AndroidSqliteDriver</span><span class="p">(</span><span class="n">db</span><span class="p">)</span>
  <span class="n">Database</span><span class="p">.</span><span class="na">Schema</span><span class="p">.</span><span class="na">create</span><span class="p">(</span><span class="n">driver</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>


<p>You can do the same for your migrations if you place them in <code>.sqm</code> files, but thats not necessary part
of the upgrade.</p>
<p>At this point things should still work normally.</p>
<p>Next add in the code to create your <code>Database</code> as part of an object graph/singleton pattern/whevs:</p>
<div class="codehilite"><pre><span></span><code><span class="nd">@Provides</span> <span class="nd">@Singleton</span> <span class="kd">static</span> <span class="n">SupportSQLiteOpenHelper</span> <span class="nf">provideDatabaseHelper</span><span class="p">(</span>
    <span class="nd">@App</span> <span class="n">Context</span> <span class="n">context</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">SupportSQLiteOpenHelper</span><span class="p">.</span><span class="na">Configuration</span> <span class="n">config</span> <span class="o">=</span>  <span class="n">SupportSQLiteOpenHelper</span><span class="p">.</span><span class="na">Configuration</span><span class="p">.</span><span class="na">builder</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
      <span class="p">.</span><span class="na">name</span><span class="p">(</span><span class="n">DATABASE_NAME</span><span class="p">)</span>
      <span class="p">.</span><span class="na">callback</span><span class="p">(</span><span class="k">new</span> <span class="n">MyDatabaseCallback</span><span class="p">())</span>
      <span class="p">.</span><span class="na">build</span><span class="p">();</span>
  <span class="k">return</span> <span class="k">new</span> <span class="n">FrameworkSQLiteOpenHelperFactory</span><span class="p">().</span><span class="na">create</span><span class="p">(</span><span class="n">config</span><span class="p">);</span>
<span class="p">}</span>

<span class="nd">@Provides</span> <span class="nd">@Singleton</span> <span class="kd">static</span> <span class="n">Database</span> <span class="nf">provideDatabase</span><span class="p">(</span>
    <span class="n">SupportSQLiteOpenHelper</span> <span class="n">helper</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">new</span> <span class="n">Database</span><span class="p">(</span><span class="k">new</span> <span class="n">AndroidSqliteDriver</span><span class="p">(</span><span class="n">helper</span><span class="p">));</span>
<span class="p">}</span>
</code></pre></div>


<p>If you're also using SQL Brite make sure you create a <code>BriteDatabase</code> with the same <code>SupportSQLiteOpenHelper</code>
that's being used to create the <code>Database</code>.</p>
<p>Things should still be working.</p>
<p>The following assume you're using SQL Brite to get reactive callbacks from the database, but upgrades
using only SQL Delight will be similar.</p>
<p>Mutating queries can be converted individually by using the <code>Database</code>:</p>
<p>before:</p>
<div class="codehilite"><pre><span></span><code><span class="k">private</span> <span class="k">val</span> <span class="py">insertUser</span><span class="p">:</span> <span class="n">UserModel</span><span class="p">.</span><span class="n">InsertUser</span> <span class="k">by</span> <span class="n">lazy</span> <span class="p">{</span>
  <span class="n">UserModel</span><span class="p">.</span><span class="n">InsertUser</span><span class="p">(</span><span class="n">datbaseOpenHelper</span><span class="p">.</span><span class="n">writableDatabase</span><span class="p">)</span>
<span class="p">}</span>

<span class="n">insertUser</span><span class="p">.</span><span class="n">bind</span><span class="p">(</span><span class="m">2</span><span class="p">,</span> <span class="s">&quot;Jake&quot;</span><span class="p">)</span>
<span class="n">insertUser</span><span class="p">.</span><span class="n">executeInsert</span><span class="p">()</span>
</code></pre></div>


<p>after:</p>
<div class="codehilite"><pre><span></span><code><span class="n">database</span><span class="p">.</span><span class="n">userQueries</span><span class="p">.</span><span class="n">insertUser</span><span class="p">(</span><span class="m">2</span><span class="p">,</span> <span class="s">&quot;Jake&quot;</span><span class="p">)</span>
</code></pre></div>


<p>You no longer need a "Factory" type to perform queries, the query wrapper is all that is needed.</p>
<p>before:</p>
<div class="codehilite"><pre><span></span><code><span class="k">val</span> <span class="py">query</span> <span class="p">=</span> <span class="n">User</span><span class="p">.</span><span class="n">FACTORY</span><span class="p">.</span><span class="n">users</span><span class="p">()</span>
<span class="k">val</span> <span class="py">usersObservable</span> <span class="p">=</span> <span class="n">briteDatabase</span><span class="p">.</span><span class="n">createQuery</span><span class="p">(</span><span class="n">query</span><span class="p">.</span><span class="n">tables</span><span class="p">,</span> <span class="n">query</span><span class="p">.</span><span class="n">statement</span><span class="p">,</span> <span class="n">query</span><span class="p">.</span><span class="n">args</span><span class="p">)</span>
  <span class="p">.</span><span class="n">mapToList</span><span class="p">(</span><span class="n">User</span><span class="p">.</span><span class="n">FACTORY</span><span class="p">.</span><span class="n">usersMapper</span><span class="p">()</span><span class="o">::</span><span class="n">map</span><span class="p">)</span>
</code></pre></div>


<p>after:</p>
<div class="codehilite"><pre><span></span><code><span class="k">val</span> <span class="py">usersObservable</span> <span class="p">=</span> <span class="n">database</span><span class="p">.</span><span class="n">userQueries</span><span class="p">.</span><span class="n">users</span><span class="p">()</span>
  <span class="p">.</span><span class="n">asObservable</span><span class="p">(</span><span class="n">Schedulers</span><span class="p">.</span><span class="n">io</span><span class="p">())</span> <span class="c1">// The scheduler to run the query on.</span>
  <span class="p">.</span><span class="n">mapToList</span><span class="p">()</span>
</code></pre></div>


<p>If you still want to use a custom type, pass it as a parameter to the query.</p>
<div class="codehilite"><pre><span></span><code><span class="k">val</span> <span class="py">myUsersObservable</span> <span class="p">=</span> <span class="n">database</span><span class="p">.</span><span class="n">userQueries</span><span class="p">.</span><span class="n">users</span><span class="p">(</span><span class="o">::</span><span class="n">MyUser</span><span class="p">)</span>
  <span class="p">.</span><span class="n">asObservable</span><span class="p">(</span><span class="n">Schedulers</span><span class="p">.</span><span class="n">io</span><span class="p">())</span>
  <span class="p">.</span><span class="n">mapToList</span><span class="p">()</span>
</code></pre></div>


<p>Once you no longer have references to <code>UserModel.java</code>, delete the whole class. Repeat for each of
your <code>*Model.java</code> files until upgrading is complete!</p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../gradle/" title="Gradle" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Gradle
              </div>
            </div>
          </a>
        
        
          <a href="../changelog/" title="Changelog" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Changelog
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4,11V13H16L10.5,18.5L11.92,19.92L19.84,12L11.92,4.08L10.5,5.5L16,11H4Z" /></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2019 Square, Inc.
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/vendor.36cbf620.min.js"></script>
      <script src="../assets/javascripts/bundle.00c583dd.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "..",
          features: [],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.7f7c8775.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>